# ============================================
# Church Management Application - Backend
# Environment Configuration
# ============================================
# Copy this file to .env and update values
# NEVER commit .env file to version control
# ============================================

# ==========================================
# DATABASE CONFIGURATION
# ==========================================
# PostgreSQL connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=SCHEMA
DATABASE_URL="postgresql://username:password@localhost:5432/church_app?schema=public"

# Test database (optional, for running tests)
# TEST_DATABASE_URL="postgresql://username:password@localhost:5432/church_app_test?schema=public"

# ==========================================
# JWT AUTHENTICATION
# ==========================================
# Secret key for signing JWT tokens
# IMPORTANT: Use a strong, random secret in production (min 32 characters)
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET="your-super-secret-jwt-key-change-in-production"

# Access token expiration (short-lived for security)
# Formats: 15m, 1h, 1d
JWT_ACCESS_EXPIRY="15m"

# Refresh token expiration (longer-lived)
# Used to obtain new access tokens
JWT_REFRESH_EXPIRY="7d"

# ==========================================
# MULTI-FACTOR AUTHENTICATION (MFA)
# ==========================================
# MFA issuer name (shown in authenticator apps)
MFA_ISSUER="Sing Buri Adventist Center"

# Number of backup codes to generate per user
MFA_BACKUP_CODES_COUNT=10

# ==========================================
# EMAIL CONFIGURATION (SMTP)
# ==========================================
# SMTP server settings for sending emails
SMTP_HOST="smtp.gmail.com"
SMTP_PORT=587

# Use TLS (true for port 465, false for 587 with STARTTLS)
SMTP_SECURE=false

# SMTP credentials
# For Gmail: Use an App Password, not your regular password
# See: https://support.google.com/accounts/answer/185833
SMTP_USER="your-email@example.com"
SMTP_PASSWORD="your-email-password"

# Email sender information
SMTP_FROM_NAME="Sing Buri Adventist Center"
SMTP_FROM_EMAIL="noreply@singburi-adventist.org"

# ==========================================
# APPLICATION SETTINGS
# ==========================================
# Server port (default: 3000)
PORT=3000

# Environment mode
# Values: development, staging, production
NODE_ENV="development"

# Allowed CORS origins (comma-separated for multiple)
# Example: http://localhost:5173,https://yourdomain.com
CORS_ORIGIN="http://localhost:5173"

# API rate limiting (requests per minute per IP)
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# ==========================================
# SECURITY & SESSION
# ==========================================
# Session timeout in hours (user auto-logout after inactivity)
SESSION_TIMEOUT_HOURS=24

# Account lockout after failed login attempts
ACCOUNT_LOCKOUT_DURATION_MINUTES=15
MAX_FAILED_LOGIN_ATTEMPTS=5

# Password reset token expiration
PASSWORD_RESET_EXPIRY_HOURS=1

# ==========================================
# LOGGING
# ==========================================
# Log level: error, warn, info, http, verbose, debug
LOG_LEVEL="info"

# Log format: json, simple
LOG_FORMAT="simple"

# Log file path (optional, leave empty for console only)
# LOG_FILE_PATH="./logs/app.log"

# ==========================================
# OPTIONAL: REDIS CACHING
# ==========================================
# Enable Redis for caching (improves performance)
# Uncomment and configure if using Redis

# REDIS_URL="redis://localhost:6379"
# REDIS_PASSWORD=""
# CACHE_TTL_SECONDS=3600

# ==========================================
# OPTIONAL: BACKUP CONFIGURATION
# ==========================================
# Path for storing database backups
# BACKUP_PATH="./backups"
# BACKUP_RETENTION_DAYS=30

# ==========================================
# OPTIONAL: WEBSOCKET CONFIGURATION
# ==========================================
# WebSocket ping interval (ms)
# WS_PING_INTERVAL=25000

# WebSocket ping timeout (ms)
# WS_PING_TIMEOUT=5000

# ==========================================
# PUSH NOTIFICATIONS (VAPID)
# ==========================================
# Generate keys with: npx web-push generate-vapid-keys
VAPID_PUBLIC_KEY=""
VAPID_PRIVATE_KEY=""
VAPID_SUBJECT="mailto:admin@singburi-adventist.org"

# ==========================================
# ERROR TRACKING (SENTRY)
# ==========================================
# Enable Sentry error tracking (recommended for production)
SENTRY_ENABLED=false
SENTRY_DSN=""
SENTRY_ENVIRONMENT="development"
# Optional: release version tag
# SENTRY_RELEASE="1.0.0"

# ==========================================
# REDIS CACHING (UPDATED)
# ==========================================
# Enable Redis for caching and sessions
REDIS_ENABLED=false
REDIS_URL="redis://localhost:6379"
# REDIS_PASSWORD=""
# CACHE_TTL_SECONDS=3600
